<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Angelo's Burger POS</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="/css/user-settings.css">
</head>
<body>
    
    <div id="notificationContainer"></div>
    
    <div class="sidebar">
        <img src="/css/Angelo's_Burger.jpg" alt="Angelo's Burger Logo" id="logo">
        <h1 class="divider"></h1>
        <div class="menu-top">
            <div class="menu-item">
                <a href="/Dashboard/User-Page/POS">
                    <!-- POS Icon from Flaticon -->
                    <img src="https://cdn-icons-png.flaticon.com/512/8974/8974918.png" alt="POS" class="menu-icon">
                    POS
                </a>
            </div>
            <div class="menu-item"> 
                <a href="/Dashboard/User-dashboard/User-dashboard/Inventory/POS/user-Inventory">
                    <!-- Inventory Icon from Flaticon -->
                    <img src="https://cdn-icons-png.flaticon.com/512/8229/8229337.png" alt="Inventory" class="menu-icon">
                    Inventory
                </a>
            </div>
        </div>

        <div class="menu-item active">
            <a href="/Dashboard/User-dashboard/user-Settings">
                <!-- Settings Icon from Flaticon -->
                <img src="https://cdn-icons-png.flaticon.com/512/2099/2099058.png" alt="Settings" class="menu-icon">
                Settings
            </a>
        </div>

        <div class="logout-section">
            <button class="logout-btn">
                <!-- Logout Icon from Flaticon -->
                <img src="https://cdn-icons-png.flaticon.com/512/1286/1286853.png" alt="Logout" class="menu-icon">
                Logout
            </button>
        </div>
    </div>
    
    <div class="main-content">
        <h3 class="Settings" style="color: #6a0dad;">Settings</h3>
        <div class="content-box7">
           
            <div class="pagination-buttons">
                <button class="page-btn active" data-page="profile">My Profile</button>
                <button class="page-btn" data-page="stock-request">Stock Request</button>
            </div>
        </div>
        <br>
        <div class="content-box">
            <br>
            
            <!-- Profile Page -->
            <div class="content-box-content active" id="profile-box-content">
                <h4 style="color: #6a0dad; margin-bottom: 20px;">My Profile</h4>
                

                <div class="profile-card">
                    <div class="profile-header">
                        <div class="profile-icon">
                            <img src="https://cdn-icons-png.flaticon.com/512/1144/1144760.png" alt="User Profile">
                        </div>
                        <div class="profile-info">
                            <h4 id="profile-username">Loading...</h4>
                            <p id="profile-email">Angelo's Burger POS System</p>
                        </div>
                    </div>
                    
                    <div class="profile-details">
                        <div class="detail-row">
                            <span class="detail-label">Username:</span>
                            <span class="detail-value" id="profile-username-display">--</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Role:</span>
                            <span class="detail-value">
                                <span id="profile-role-badge" class="role-badge">Loading...</span>
                            </span>
                        </div>
                    </div>
                </div>
 
                
                <div class="profile-actions-container">
                    <button class="btn btn-outline-primary" id="refreshProfileBtn">
                        <img src="https://cdn-icons-png.flaticon.com/512/2997/2997933.png" alt="Refresh" width="18" height="18" class="me-2">
                        refresh
                    </button>
                </div>
            </div>
            
<!-- Stock Request Page -->
<div class="content-box-content" id="stock-request-box-content">
    <h4 style="color: #6a0dad; margin-bottom: 20px;">Stock Request</h4>
    
    <!-- Stock Request Form -->
    <div class="stock-request-form">
        <div class="form-header">
            <h5>Request New Stock</h5>
            <button class="clear-form-btn" id="clearFormBtn">Clear Form</button>
        </div>
        
        <div class="form-group">
            <label class="form-label" for="item-category">Product Category</label>
            <select id="item-category" class="form-select" required>
                <option value="">Select Category</option>
                <option value="Bread">Bread</option>
                <option value="Meat">Meat</option>
                <option value="Poultry">Poultry</option>
                <option value="Dairy">Dairy</option>
                <option value="Drinks">Drinks</option>
                <option value="Energy Drinks">Energy Drinks</option>
                <option value="Hotdog & Sausages">Hotdog & Sausages</option>
                <option value="Softdrinks">Softdrinks</option>
            </select>
        </div>  
        
        <div class="form-group">
            <label class="form-label" for="item-name">Item Name</label>
            <select id="item-name" class="form-select" required>
                <option value="">Select an item</option>
            </select>
        </div>
        
        <div class="form-group">
            <label class="form-label" for="urgency">Urgency Level</label>
            <select id="urgency" class="form-select">
                <option value="low">Low</option>
                <option value="medium" selected>Medium</option>
                <option value="high">High</option>
                <option value="critical">Critical</option>
            </select>
        </div>
        
        <button class="submit-btn" id="submitRequestBtn">Submit Request</button>
    </div>
    
    <!-- Request History -->
    <div class="request-history">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h5 style="color: #333; margin: 0;">History</h5>
            <button class="btn btn-sm btn-outline-secondary" id="refreshHistoryBtn">
                <span class="loading-spinner" style="display: none;"></span>
                Refresh
            </button>
        </div>
        
        <div id="requestHistoryContent">
            <table class="history-table" id="requestHistoryTable">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Category</th>
                        <th>Urgency</th>
                        <th>Status</th>
                    </tr>
                </thead>
                <tbody id="requestHistoryBody">
                    <!-- Will be populated by JavaScript -->
                </tbody>
            </table>
            <div id="emptyHistory" class="empty-state" style="display: none;">
                <div class="empty-state-icon">ðŸ“¦</div>
                <p>No stock requests yet</p>
            </div>
        </div>
    </div>
</div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>
    <script src="/js/user-settings.js"></script>
    <script>
        // Item mapping by category
        const categoryItems = {
            "Bread": ["Burger Bun", "Footlong Bun"],
            "Poultry": ["Eggs"],
            "Dairy": ["Cheese"],
            "Drinks": ["Mineral Water", "Zesto"], 
            "Hotdog & Sausages": ["Hotdog", "Hangarian Sausage", "Ham"],
            "Softdrink": ["Coca-Cola", "Sprite", "Royal", "Pepsi", "Mountain Dew"],
            "Energy Drinks": ["Sting", "Cobra"],
            "Meat": ["Beef", "Pork", "Chicken"],
            "Softdrinks": ["Coca-Cola", "Sprite", "Royal", "Pepsi", "Mountain Dew"]
        };

        // Initialize category dropdown handling
        document.addEventListener('DOMContentLoaded', function() {
            const categorySelect = document.getElementById('item-category');
            const itemSelect = document.getElementById('item-name');
            
            if (!categorySelect || !itemSelect) {
                console.error('Category or item select element not found');
                return;
            }
            
            // Function to populate items based on selected category
            function populateItems() {
                const selectedCategory = categorySelect.value;
                itemSelect.innerHTML = '<option value="">Select an item</option>';
                
                if (selectedCategory && categoryItems[selectedCategory]) {
                    categoryItems[selectedCategory].forEach(item => {
                        const option = document.createElement('option');
                        option.value = item;
                        option.textContent = item;
                        itemSelect.appendChild(option);
                    });
                }
            }
            
            // Event listener for category change
            categorySelect.addEventListener('change', populateItems);
        });
    </script>
</body>
</html>